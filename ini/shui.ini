[env:RN12]
extends              = mks_robin_nano_v1v2_common
build_flags          = ${stm32_variant.build_flags}
    -DENABLE_HWSERIAL3
    -DSS_TIMER=4
    -D_TIMER_SERIAL=TIM5
    -DROBIN_NANO_12=1
    -D__F1__

[env:RN12-NO]
extends              = mks_robin_nano_v1v2_common
build_flags          = ${stm32_variant.build_flags}
    -DENABLE_HWSERIAL3
    -D_TIMER_SERIAL=TIM5
    -DROBIN_NANO_12=1
    -D__F1__
board_build.offset          = 0x0000
board_upload.offset_address = 0x08000000
board_build.encrypt_mks     =


[env:RN20]
extends         = mks_robin_nano_v1v2_common
build_flags     = ${stm32_variant.build_flags}
    -DMCU_STM32F103VE
    -DSS_TIMER=4
    -DROBIN_NANO_20=1
    -D__F1__

[env:F4_RN13]
extends       = mks_robin_nano_v1_3_f4_common
build_flags   = ${stm32_variant.build_flags}
    -DMCU_STM32F407VE
    -DENABLE_HWSERIAL3
    -DSTM32_FLASH_SIZE=512
    -DSS_TIMER=4
    -DHAL_SD_MODULE_ENABLED
    -DHAL_SRAM_MODULE_ENABLED
    -DF4_ROBIN_NANO_13=1
    -D__F4__
build_unflags = ${stm32_variant.build_unflags}
    -DUSBCON
    -DUSBD_USE_CDC


[env:F4_RN30_]
extends                     = stm32_variant
board                       = marlin_STM32F407VGT6_CCM
board_build.variant         = MARLIN_F4x7Vx
board_build.offset          = 0xC000
board_upload.offset_address = 0x0800C000
board_build.rename          = Robin_nano_v3.bin
build_flags                 = ${stm_flash_drive.build_flags} ${stm32f4_I2C1.build_flags}
    -DHAL_PCD_MODULE_ENABLED
    -DF4_ROBIN_NANO_30=1
    -D__F4__
debug_tool                  = jlink
upload_protocol             = jlink

[env:F4_RN30]
platform          = ${common_stm32.platform}
extends           = env:mks_robin_nano_v3
platform_packages = ${stm_flash_drive.platform_packages}
build_flags       = ${stm_flash_drive.build_flags} ${stm32f4_I2C1.build_flags}
    -DUSE_USBHOST_HS
    -DUSBD_IRQ_PRIO=5
    -DUSBD_IRQ_SUBPRIO=6
    -DUSE_USB_HS_IN_FS
    -DF4_ROBIN_NANO_30=1
    -DENABLE_MAPLE=0
    -D__F4__